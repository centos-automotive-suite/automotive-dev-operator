apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.19.0
  creationTimestamp: null
  name: operatorconfigs.automotive.sdv.cloud.redhat.com
spec:
  group: automotive.sdv.cloud.redhat.com
  names:
    kind: OperatorConfig
    listKind: OperatorConfigList
    plural: operatorconfigs
    singular: operatorconfig
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.osBuilds.enabled
      name: OS Builds
      type: boolean
    - jsonPath: .status.phase
      name: Phase
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: OperatorConfig is the Schema for the operatorconfigs API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: OperatorConfigSpec defines the desired state of OperatorConfig
            properties:
              buildAPI:
                description: BuildAPI defines configuration for the Build API server
                properties:
                  maxLogStreamDurationMinutes:
                    description: |-
                      MaxLogStreamDurationMinutes is the maximum duration for log streaming in minutes
                      Default: 120 (2 hours)
                    format: int32
                    type: integer
                  maxManifestSize:
                    description: |-
                      MaxManifestSize is the maximum allowed manifest size in bytes
                      Default: 10485760 (10MB)
                    format: int64
                    type: integer
                  maxTotalUploadSize:
                    description: |-
                      MaxTotalUploadSize is the maximum total upload size per request in bytes
                      Default: 2147483648 (2GB)
                    format: int64
                    type: integer
                  maxUploadFileSize:
                    description: |-
                      MaxUploadFileSize is the maximum size for individual uploaded files in bytes
                      Default: 1073741824 (1GB)
                    format: int64
                    type: integer
                type: object
              osBuilds:
                description: OSBuilds defines the configuration for OS build operations
                properties:
                  clusterRegistryRoute:
                    description: |-
                      ClusterRegistryRoute is the external route for the cluster's internal image registry
                      Required for bootc builds to allow nested containers to pull builder images
                      Example: "default-route-openshift-image-registry.apps.mycluster.example.com"
                    type: string
                  enabled:
                    default: true
                    description: Enabled determines if Tekton tasks for OS builds
                      should be deployed
                    type: boolean
                  memoryVolumeSize:
                    description: |-
                      MemoryVolumeSize specifies the size limit for memory-backed volumes (required if UseMemoryVolumes is true)
                      Example: "2Gi"
                    type: string
                  nodeSelector:
                    additionalProperties:
                      type: string
                    description: |-
                      NodeSelector specifies node labels that build pods must match for scheduling
                      These labels are added to the pod template used by Tekton PipelineRuns
                      Example: {"dedicated": "builds", "disktype": "ssd"}
                    type: object
                  pvcSize:
                    description: |-
                      PVCSize specifies the size for persistent volume claims created for build workspaces
                      Default: "8Gi"
                    type: string
                  runtimeClassName:
                    description: |-
                      RuntimeClassName specifies the runtime class to use for the build pod
                      More info: https://kubernetes.io/docs/concepts/containers/runtime-class/
                    type: string
                  serveExpiryHours:
                    description: |-
                      ServeExpiryHours specifies how long to serve build artifacts before automatic cleanup
                      Default: 24
                    format: int32
                    type: integer
                  tolerations:
                    description: |-
                      Tolerations specifies tolerations to be added to build pods
                      Enables scheduling on tainted nodes for dedicated/exclusive access
                      Example: [{"key": "automotive.sdv.cloud.redhat.com/dedicated", "operator": "Equal", "value": "builds", "effect": "NoSchedule"}]
                    items:
                      description: |-
                        The pod this Toleration is attached to tolerates any taint that matches
                        the triple <key,value,effect> using the matching operator <operator>.
                      properties:
                        effect:
                          description: |-
                            Effect indicates the taint effect to match. Empty means match all taint effects.
                            When specified, allowed values are NoSchedule, PreferNoSchedule and NoExecute.
                          type: string
                        key:
                          description: |-
                            Key is the taint key that the toleration applies to. Empty means match all taint keys.
                            If the key is empty, operator must be Exists; this combination means to match all values and all keys.
                          type: string
                        operator:
                          description: |-
                            Operator represents a key's relationship to the value.
                            Valid operators are Exists and Equal. Defaults to Equal.
                            Exists is equivalent to wildcard for value, so that a pod can
                            tolerate all taints of a particular category.
                          type: string
                        tolerationSeconds:
                          description: |-
                            TolerationSeconds represents the period of time the toleration (which must be
                            of effect NoExecute, otherwise this field is ignored) tolerates the taint. By default,
                            it is not set, which means tolerate the taint forever (do not evict). Zero and
                            negative values will be treated as 0 (evict immediately) by the system.
                          format: int64
                          type: integer
                        value:
                          description: |-
                            Value is the taint value the toleration matches to.
                            If the operator is Exists, the value should be empty, otherwise just a regular string.
                          type: string
                      type: object
                    type: array
                  useMemoryVolumes:
                    description: UseMemoryVolumes determines whether to use memory-backed
                      volumes for build operations
                    type: boolean
                required:
                - enabled
                type: object
            type: object
          status:
            description: OperatorConfigStatus defines the observed state of OperatorConfig
            properties:
              message:
                description: Message provides detail about the current phase
                type: string
              observedGeneration:
                description: ObservedGeneration is the most recent generation observed
                  by the controller.
                format: int64
                type: integer
              osBuildsDeployed:
                description: OSBuildsDeployed indicates if the OS Builds Tekton tasks
                  are currently deployed
                type: boolean
              phase:
                description: Phase represents the current phase (Ready, Reconciling,
                  Failed)
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: null
  storedVersions: null
